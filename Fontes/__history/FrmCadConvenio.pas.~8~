unit FrmCadConvenio;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, cxGraphics, cxControls, cxLookAndFeels, cxLookAndFeelPainters,
  cxContainer, cxEdit, dxSkinsCore, dxSkinBlack, dxSkinBlue, dxSkinCaramel,
  dxSkinCoffee, dxSkinDarkRoom, dxSkinDarkSide, dxSkinFoggy, dxSkinGlassOceans,
  dxSkiniMaginary, dxSkinLilian, dxSkinLiquidSky, dxSkinLondonLiquidSky,
  dxSkinMcSkin, dxSkinMoneyTwins, dxSkinOffice2007Black, dxSkinOffice2007Blue,
  dxSkinOffice2007Green, dxSkinOffice2007Pink, dxSkinOffice2007Silver,
  dxSkinOffice2010Black, dxSkinOffice2010Blue, dxSkinOffice2010Silver,
  dxSkinPumpkin, dxSkinSeven, dxSkinSharp, dxSkinSilver, dxSkinSpringTime,
  dxSkinStardust, dxSkinSummer2008, dxSkinsDefaultPainters, dxSkinValentine,
  dxSkinXmas2008Blue, Menus, DB, ZAbstractRODataset, ZAbstractDataset, ZDataset,
  cxCheckBox, cxDBEdit, cxMaskEdit, cxTextEdit, StdCtrls, ExtCtrls, ImgList,
  cxButtons, cxGroupBox, ActnList, cxDropDownEdit, JvExControls, JvEnterTab;

type
  TFCadConvenio = class(TForm)
    Botoes: TActionList;
    AcNovo: TAction;
    AcSalvar: TAction;
    AcPesquisa: TAction;
    cxGroupBox1: TcxGroupBox;
    cxButton4: TcxButton;
    cxButton1: TcxButton;
    cxGroupBox2: TcxGroupBox;
    cxButton3: TcxButton;
    cxButton2: TcxButton;
    cxButton5: TcxButton;
    ImgHabilita: TImageList;
    Panel1: TPanel;
    Label1: TLabel;
    Label5: TLabel;
    cxDBTextEdit1: TcxDBTextEdit;
    cxDBTextEdit3: TcxDBTextEdit;
    cxDBCheckBox1: TcxDBCheckBox;
    DConvenio: TDataSource;
    QConvenio: TZQuery;
    QConveniocodigo: TIntegerField;
    QConveniodescricao: TWideStringField;
    QConveniotipo_desconto: TWideStringField;
    QConveniovalor_desconto: TFloatField;
    QConveniocobrar_cliente: TWideStringField;
    QConvenioinativo: TWideStringField;
    cxDBComboBox1: TcxDBComboBox;
    Label2: TLabel;
    cxDBCheckBox2: TcxDBCheckBox;
    JvEnterAsTab1: TJvEnterAsTab;
    procedure cxButton4Click(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure FormShow(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FCadConvenio: TFCadConvenio;

implementation

uses
  Dados;

{$R *.dfm}

procedure TFCadConvenio.cxButton4Click(Sender: TObject);
begin
   //fecha o formulario
   Close;
end;

procedure TFCadConvenio.FormClose(Sender: TObject; var Action: TCloseAction);
begin
     //verifica se não esta fazendo inclusão ou alteração do registro
   if DConvenio.State in [dsInsert, dsEdit] then
   begin
      if Application.MessageBox('Tem certeza que deseja cancelar a Alteração ou Inclusão?','AVISO', MB_ICONQUESTION+MB_YESNO)= IDYES then
      begin
         QConvenio.Cancel;
         Close;
      end
      else
      begin
         Abort;
      end;
   end;
end;

procedure TFCadConvenio.FormShow(Sender: TObject);
begin
   //desativa os campos edits para não deixar alterar
   Panel1.Enabled := False;
end;

end.
